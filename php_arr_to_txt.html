<!DOCTYPE html>
<html>
<head>
<meta content="text/html" charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">	
<title>Wheiss tool</title>
<link rel="Shortcut Icon" href="./ico/illust_73070421.ico" type="image/x-icon" />
<link rel="stylesheet" type="text/css" href="./css/default.css">
</head>
<body>
<h5 style="user-select:none !important;" id="un_copy_Para">A tool for converting PHP id_array into txt-format list.</h5>
<style>
	.user_path-textarea {
		height: 16px;
	}
	.result-textarea {
		background-color: #deedfc;
		border: 0.8mm solid #fcdeee;
	}
	.submit-button {
		margin:0.25% 0.25% 0.25% 14.75%;
	}
	.copy-button {
		margin:0.25% 0.25% 0.25% 0.25%;
		padding: 4px 12px;
		background-color: #deedfc;
	}
</style>

<form action="api/php_arr_to_txt.php" method="POST">
	<textarea name="user_path" class="user_path-textarea" placeholder="https://path/filename?id="></textarea>
	<br>
	<textarea name="arr_data" placeholder="'cctv1' => 'CCTV1SD_1200', //CCTV1
etc."></textarea>
	<br>
	<input type="checkbox" name="scheme" value="1" id="scheme">
	
		<label for="scheme"><p2 class="unselectable" style="user-select:none !important;" id="un_copy_Para">Original ID</p2></label>
	
	<button type="submit" class="submit-button" style="user-select:none !important;" id="un_copy_Para">Submit</button>
	<button onclick="copyToClipboard()" class="copy-button" style="user-select:none !important;" id="un_copy_Para">Copy</button>
</form>
<div>
	<textarea id="result" class="result-textarea" readonly placeholder="CCTV1,https://path/filename?id=cctv1
Or
CCTV1,https://path/filename?id=CCTV1SD_1200
etc."></textarea>
	<br>
	<hr>
	<p1 style="user-select:none !important;" id="un_copy_Para">Author:&nbsp;<a href="https://www.wheiss.com/">Wheiss</a>&emsp;Source Code:&nbsp;<a href="https://github.com/qingying2022/wheiss-tool/">Github</a>&emsp;Version:&nbsp;1.0.1</p1>
</div>

<script>
	function copyToClipboard() {
		const resultTextarea = document.getElementById('result');
		resultTextarea.select();
		document.execCommand('copy');
	}

	const form = document.querySelector('form');
	form.addEventListener('submit', function(event) {
		event.preventDefault();

		const arr_data = document.querySelector('textarea[name="arr_data"]').value;
		const user_path = document.querySelector('textarea[name="user_path"]').value;
		 const scheme = document.querySelector('input[name="scheme"]').checked ? document.querySelector('input[name="scheme"]').value : '';
		fetch('api/php_arr_to_txt.php', {
			method: 'POST',
			body: new URLSearchParams({
				arr_data: arr_data,
				user_path: user_path,
		scheme: scheme
})
		})
		.then(response => response.text())
		.then(processedData => {
			const resultTextarea = document.getElementById('result');
			resultTextarea.value = processedData;
		});
	});
	document.getElementById("un_copy_Para").oncopy = function(event) {
		event.clipboardData.setData("text/plain", "");
		event.preventDefault();
	};
</script>
</body>
</html>
